<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="src/css/styles.css">
    <link rel="stylesheet" href="src/css/dice.css">
    <link rel="stylesheet" href="src/css/game.css">

    <title>Henchmen Hospital</title>
  </head>
  <body>
    <div class="navBar">
      <a href="index.php">Sign In</a>
      <a href="startScreen.html">Start Screen</a>
      <a href="leaderboard.html">Leaderboard/History</a>
      <a href="game.html">Game</a>
      <a href="gameOver.html">Game Over</a>
      <a href="shop.html">Shop</a>
      <a href="workshop.html">Workshop</a>
    </div>

    <div class="wrapper" id="gameDiv">
      <div id="colorBox">
        <div id="colorPicker">
          <div class="slider-container">
            <label id="redRangeLabel" for="redRange">Red:</label>
            <input id="redRange" type="range" min="0" max="255" value="0">
            <br>
            <label id="greenRangeLabel" for="greenRange">Green:</label>
            <input id="greenRange" type="range" min="0" max="255" value="0">
            <br>
            <label id="blueRangeLabel" for="blueRange">Blue:</label>
            <input id="blueRange" type="range" min="0" max="255" value="0">
          </div>

          <button id="backBtn">Back</button>
      </div>  
    </div>
      
      <div class="henchmenChart" id="medChart1">
        <div class="clientTabs" id="clientTab1">
          <button class="active chartTabs" onclick="switchChart('medChart1', 'clientTab1', 'clientTab2')">
            Client 1
          </button>
          <button class="chartTabs" onclick="switchChart('medChart2', 'clientTab1', 'clientTab2')">
            Client 2
          </button>
        </div>
        <div id="box"></div>

        <table id="table1">
          <thead>
            <tr>
              <th class="Placeholder">************</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td id="henchName">Goomba</td>
            </tr>
          </tbody>
        </table>

        <table id="table2">
          <thead>
            <tr>
              <th class="Placeholder">******************</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td id="threshold">Threshold: </td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td id="healingFactor">Healing Factor: </td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td id="staminaPenalty">Stamina Penalty: </td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
          </tbody>

          <thead>
            <tr>
              <th><br /></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td>Curses</td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td>This henchman gets hurt by 2s</td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
            <tr>
              <td><br /></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="henchmenChart" id="medChart2">
        <div class="clientTabs" id="clientTab1">
          <button class="chartTabs" onclick="switchChart('medChart1', 'clientTab1', 'clientTab2')">
            Client 1
          </button>
          <button class="chartTabs" onclick="switchChart('medChart2', 'clientTab1', 'clientTab2')">
            Client 2
          </button>
        </div>
        <div id="box"></div>

        <table id="table1">
          <thead>
            <tr>
              <th class="Placeholder">************</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td id="henchName">Next Up</td>
            </tr>
          </tbody>
        </table>

        <table id="table2">
          <thead>
            <tr>
              <th class="Placeholder">******************</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>Threshold: </td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>Healing Factor: </td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>Stamina Penalty: </td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
          </tbody>

          <thead>
            <tr>
              <th><br></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>Curses</td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>This henchman gets hurt by 2s</td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td><br></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="henchmenHealth">
        <!-- Health -->
        <div id="henchmenHealth2"></div>
        <!-- Green Bar of health -->
        <span id="health">35/100</span>
      </div>

      <div id="henchman">
        <!-- Placeholder: Henchman portrait -->
      </div>

      <div id="diceContainer">
        <div>
          <button class="diceTabs" onclick="openTab(event, 'diceArea')" id="defaultOpen">
            Dice Area
          </button>
          <button class="diceTabs" onclick="openTab(event, 'specialDice')">
            Special Dice
          </button>
        </div>

        <div id="diceArea" class="diceRolling">

        </div>

        <div id="specialDice" class="diceRolling">
          <span>Special Dice</span>
        </div>
      </div>
      <button type="button" id="rollDiceBtn">Roll Dice</button>

      <div id="gameStats">
        <div id="stamina">Stamina: 100</div>
        <br>
        <div id="score">Score: 0</div>
        <br>
        <div id="money">Money: 0</div>
        <br>
      </div>

      <div id="collectibleEffects">

      </div>

      <div id="gameLogsTab" class="collapsed">Logs</div>
      <div id="gameLogs" class="collapsed">
        <span>Game logs:</span>
        <br>
        <!-- <span id="average">Running Average:</span> -->
        <br>
        <p id="logText"></p>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const gameLogs = document.getElementById("gameLogs");
        const gameLogsTab = document.getElementById("gameLogsTab");

        gameLogsTab.addEventListener("click", function () {
          gameLogs.classList.toggle("collapsed");
          gameLogsTab.classList.toggle("collapsed");
        });
      });

      document.getElementById("defaultOpen").click();

      function openTab(event, tabName) {
        var tabcontent = document.getElementsByClassName("diceRolling");
        for (var i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        var diceTabs = document.getElementsByClassName("diceTabs");
        for (var i = 0; i < diceTabs.length; i++) {
          diceTabs[i].className = diceTabs[i].className.replace(" active", "");
        }

        document.getElementById(tabName).style.display = "block";
        event.currentTarget.className += " active";
      }

      function switchChart(chartId, activeTabId, inactiveTabId) {
        var charts = document.querySelectorAll('.henchmenChart');
        charts.forEach(function(chart) {
          chart.style.display = 'none';
        });
      document.getElementById(chartId).style.display = 'block';

    }
    </script>

  <script>
    const henchman = document.querySelector('#henchman');
    const henchName = document.querySelector('#henchName');

    const henchArray = {
      "Beetle" : "url(src/media/Henchmen/henchman_beetle.png), url(src/media/texture2.png)",
      "Bokoblin" : "url(src/media/Henchmen/henchman_bokoblin.png), url(src/media/texture2.png)",
      "Ghost" : "url(src/media/Henchmen/henchman_ghost.png), url(src/media/texture2.png)",
      "Goomba" : "url(src/media/Henchmen/henchman_goomba.png), url(src/media/texture2.png)",
      "Grunt" : "url(src/media/Henchmen/henchman_grunt.png), url(src/media/texture2.png)",
      "Henchman 24" : "url(src/media/Henchmen/henchman_henchman24.png), url(src/media/texture2.png)",
      "Iago" : "url(src/media/Henchmen/henchman_iago.png), url(src/media/texture2.png)",
      "Pain and Panic" : "url(src/media/Henchmen/henchman_imps.png), url(src/media/texture2.png)",
      "Koopa Troopa" : "url(src/media/Henchmen/henchman_koopaTroopa.png), url(src/media/texture2.png)",
      "Minion" : "url(src/media/Henchmen/henchman_megaMinion.png), url(src/media/texture2.png)",
      "Minion" : "url(src/media/Henchmen/henchman_minion.png), url(src/media/texture2.png)",
      "Space Invader" : "url(src/media/Henchmen/henchman_spaceInvader.png), url(src/media/texture2.png)",
      "Storm Trooper" : "url(src/media/Henchmen/henchman_stormtrooper.png), url(src/media/texture2.png)",
      "Turret" : "url(src/media/Henchmen/henchman_turret.png), url(src/media/texture2.png)",
    };

    let henchNameArray = [];
    for (key in henchArray) {
      henchNameArray.push(key);
    }

    const randomIndex = Math.floor(Math.random() * henchNameArray.length);

    henchman.style.backgroundImage = henchArray[henchNameArray[randomIndex]];

    henchName.innerHTML = henchNameArray[randomIndex];

  </script>

  <script>

    document.addEventListener('DOMContentLoaded', function() {
      const fadeBtn = document.querySelector('#fadeBtn');
      const backBtn = document.querySelector('#backBtn');
      const colorBox = document.querySelector('#colorBox');

      fadeBtn.addEventListener("click", (e) => {
        colorBox.style.display = "block";
      });
      backBtn.addEventListener("click", (e) => {
        colorBox.style.display = "none";
      });
    });

  </script>
  <script>
    const redRange = document.querySelector('#redRange');
    const greenRange = document.querySelector('#greenRange');
    const blueRange = document.querySelector('#blueRange');
    const colorPicker = document.querySelector('#colorPicker');

    function updateColor() {
      const allDice = document.querySelectorAll('.die-btn');
      const redValue = redRange.value;
      const greenValue = greenRange.value;
      const blueValue = blueRange.value;
      const color = `rgb(${redValue}, ${greenValue}, ${blueValue})`;
      colorPicker.style.backgroundColor = color;

      for (var i = 0; i < allDice.length; i++) {
        allDice[i].style.setProperty('--dieBtnAfterBGColor', color);
      }
    }

    redRange.addEventListener('input', updateColor);
    greenRange.addEventListener('input', updateColor);
    blueRange.addEventListener('input', updateColor);
  </script>


  <script type="module" src="src/js/Gameplay.js"></script>

  <button type="button" id="endTurnBtn">End Turn</button>
  <button type="button" id="fadeBtn">Pick Color</button>

  </body>
</html>
